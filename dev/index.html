<!DOCTYPE html>
<html lang="en">
<head>
  <!-- DEVELOPMENT VERSION - NOT FOR PUBLIC ACCESS -->
  <!-- Prevent search engine indexing -->
  <meta name="robots" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
  <meta name="googlebot" content="noindex, nofollow">
  
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KBFQ2R1TS4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-KBFQ2R1TS4');
</script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>[DEV] Staple Games - Classic Board & Puzzle Games</title>
  <link rel="icon" href="https://cdn.bdz5.com/staplegames/matchcollector_icon.png" type="image/png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-color: #007AFF; /* Apple blue */
      --accent-red: #FF3B30; /* Apple red */
      --accent-purple: #af52de; /* Purple from logo */
      --text-primary: #1D1D1F;
      --text-secondary: #86868B;
      --bg-primary: #FFFFFF;
      --bg-secondary: #F5F5F7;
      --border-color: #E5E5E7;
      --shadow-light: 0 2px 8px rgba(0,0,0,0.08);
      --shadow-medium: 0 4px 16px rgba(0,0,0,0.12);
      --border-radius: 16px;
      --border-radius-large: 24px;
      --max-width: 1200px;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', sans-serif;
      background-color: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    /* Typography */
    h1 {
      font-size: 40px;
      font-weight: 700;
      letter-spacing: -0.02em;
      line-height: 1.1;
    }
    
    h2 {
      font-size: 32px;
      font-weight: 600;
      letter-spacing: -0.01em;
      line-height: 1.2;
    }
    
    h3 {
      font-size: 20px;
      font-weight: 600;
      letter-spacing: -0.01em;
    }
    
    p {
      font-size: 17px;
      line-height: 1.6;
      color: var(--text-secondary);
    }
    
    .container {
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 0 20px;
    }
    
    /* Header Navigation */
    .nav-header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: rgba(255, 255, 255, 0);
      backdrop-filter: blur(0px);
      -webkit-backdrop-filter: blur(0px);
      border-bottom: 1px solid transparent;
      z-index: 1000;
      transition: all 0.4s ease;
    }
    
    .nav-header.scrolled {
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border-color);
      box-shadow: var(--shadow-light);
    }
    
    .nav-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 52px;
    }
    
    .nav-logo {
      display: flex;
      align-items: center;
      gap: 12px;
      text-decoration: none;
      color: var(--text-primary);
      opacity: 0;
      transform: translateY(-10px);
      transition: all 0.3s ease;
    }
    
    .nav-logo.visible {
      opacity: 1;
      transform: translateY(0);
    }
    
    .nav-logo img {
      width: 28px;
      height: 28px;
      border-radius: 6px;
    }
    
    .nav-logo span {
      font-size: 17px;
      font-weight: 600;
    }
    
    .nav-links {
      display: flex;
      gap: 32px;
      list-style: none;
    }
    
    .nav-link {
      color: var(--text-primary);
      text-decoration: none;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.2s ease;
      position: relative;
    }
    
    .nav-link:hover {
      color: var(--accent-purple);
    }
    
    .nav-link::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 0;
      height: 2px;
      background: var(--accent-purple);
      transition: width 0.3s ease;
    }
    
    .nav-link:hover::after {
      width: 100%;
    }
    
    /* Hero Section */
    .hero {
      padding: 80px 0 32px;
      text-align: center;
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border-color);
    }
    
    .hero-container {
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 0 20px;
    }
    
    .hero-content {
      text-align: center;
      max-width: 800px;
      margin: 0 auto;
    }
    
          .hero-find-us {
        font-size: 17px;
        color: var(--text-secondary);
        margin: 16px auto 0;
        text-align: center;
      }
    
    .inline-store-link {
      color: var(--primary-color);
      text-decoration: none;
      font-weight: 600;
      transition: color 0.2s ease;
    }
    
    .inline-store-link:hover {
      color: var(--accent-purple);
      text-decoration: underline;
    }
    
    /* Horizontal Scrolling Game Cards */
    .hero-games-wrapper {
      margin-top: 8px;
      position: relative;
      max-width: var(--max-width);
      margin-left: auto;
      margin-right: auto;
    }
    
    .hero-games-scroll {
      overflow-x: auto;
      overflow-y: hidden;
      scroll-behavior: smooth;
      -webkit-overflow-scrolling: touch;
      padding: 12px 0;
      scrollbar-width: none; /* Firefox */
      -ms-overflow-style: none; /* IE and Edge */
    }
    
    .hero-games-scroll::-webkit-scrollbar {
      display: none; /* Hide scrollbar */
    }
    
    /* Gradient overlays for fade effect */
    .hero-games-wrapper::before,
    .hero-games-wrapper::after {
      content: '';
      position: absolute;
      top: 0;
      bottom: 0;
      width: 100px;
      pointer-events: none;
      z-index: 1;
    }
    
    .hero-games-wrapper::before {
      left: 0;
      background: linear-gradient(to right, var(--bg-secondary) 0%, transparent 100%);
    }
    
    .hero-games-wrapper::after {
      right: 0;
      background: linear-gradient(to left, var(--bg-secondary) 0%, transparent 100%);
    }
    
    .hero-games-container {
      display: flex;
      gap: 16px;
      padding: 0 20px;
      width: max-content;
      margin: 0 auto;
    }
    
    .hero-game-card {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 20px;
      background: white;
      border-radius: 12px;
      box-shadow: var(--shadow-light);
      text-decoration: none;
      color: var(--text-primary);
      transition: all 0.2s ease;
      border: 1px solid var(--border-color);
      white-space: nowrap;
      cursor: pointer;
    }
    
    .hero-game-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-medium);
      border-color: rgba(88, 86, 214, 0.2);
    }
    
    .hero-game-icon {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .hero-game-name {
      font-size: 16px;
      font-weight: 600;
    }
    
    /* Auto-scroll animation */
    @keyframes autoScroll {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }
    
    .hero-games-container {
      animation: autoScroll 60s linear infinite;
    }
    
    .hero-games-scroll:hover .hero-games-container {
      animation-play-state: paused;
    }
    
    /* Down arrow section */
    .hero-see-all {
      text-align: center;
      margin-top: 24px;
      padding-bottom: 16px;
    }
    
    .hero-see-all a {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 16px;
      font-weight: 500;
      transition: all 0.2s ease;
    }
    
    .hero-see-all a:hover {
      color: var(--primary-color);
      transform: translateY(2px);
    }
    
    .hero-see-all svg {
      width: 20px;
      height: 20px;
      transition: transform 0.2s ease;
    }
    
    .hero-see-all a:hover svg {
      transform: translateY(2px);
    }
    
    .hero-logo {
      width: 100px;
      height: 100px;
      margin: 0 auto 16px;
      border-radius: var(--border-radius-large);
      box-shadow: var(--shadow-medium);
    }
    
    .hero h1 {
      margin-bottom: 4px;
    }
    
    .hero-tagline {
      font-size: 22px;
      font-weight: 500;
      color: var(--accent-purple);
      margin-bottom: 12px;
    }
    
    .hero-subtitle {
      font-size: 18px;
      color: var(--text-secondary);
      margin: 0 0 24px;
    }
    
    .store-buttons {
      display: flex;
      justify-content: center;
      gap: 16px;
      flex-wrap: wrap;
    }
    
    .store-button {
      display: inline-flex;
      align-items: center;
      gap: 12px;
      padding: 12px 24px;
      background: var(--text-primary);
      color: white;
      text-decoration: none;
      border-radius: 30px;
      font-weight: 500;
      font-size: 16px;
      transition: all 0.3s ease;
      border: 2px solid transparent;
    }
    
    .store-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(88, 86, 214, 0.3);
      background: var(--accent-purple);
      border-color: var(--accent-purple);
    }
    
    .store-button svg {
      width: 20px;
      height: 20px;
    }
    
    /* Games Section */
    .games-section {
      padding: 80px 0;
    }
    
    .section-header {
      text-align: center;
      margin-bottom: 48px;
      position: relative;
    }
    
    .section-title {
      font-size: 40px;
      font-weight: 700;
      margin-bottom: 8px;
      letter-spacing: -0.02em;
      position: relative;
      display: inline-block;
    }
    
    .section-title::after {
      content: '';
      position: absolute;
      bottom: -8px;
      left: 50%;
      transform: translateX(-50%);
      width: 60px;
      height: 3px;
      background: var(--accent-purple);
      border-radius: 2px;
    }
    
    .section-subtitle {
      font-size: 19px;
      color: var(--text-secondary);
    }
    
    .games-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 24px;
    }
    
    .game-card {
      background: var(--bg-primary);
      border-radius: var(--border-radius);
      overflow: hidden;
      box-shadow: var(--shadow-light);
      transition: all 0.3s ease;
      cursor: pointer;
    }
    
    .game-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-medium);
    }
    
    .game-card-content {
      padding: 20px;
    }
    
    .game-header {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 16px;
    }
    
    .game-icon {
      width: 60px;
      height: 60px;
      border-radius: 14px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .game-info h3 {
      margin-bottom: 4px;
    }
    
    .game-category {
      font-size: 14px;
      color: var(--text-secondary);
    }
    
    .game-description {
      font-size: 15px;
      color: var(--text-secondary);
      margin-bottom: 20px;
      line-height: 1.5;
    }
    
    .game-links {
      display: flex;
      gap: 12px;
    }
    
    .game-link {
      flex: 1;
      padding: 10px;
      text-align: center;
      background: var(--bg-secondary);
      color: var(--primary-color);
      text-decoration: none;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.2s ease;
      border: 1px solid transparent;
    }
    
    .game-link:hover {
      background: var(--accent-purple);
      color: white;
      border-color: var(--accent-purple);
    }
    
    /* Mobile Menu */
    .mobile-menu-btn {
      display: none;
      background: none;
      border: none;
      padding: 8px;
      cursor: pointer;
    }
    
    .mobile-menu-btn span {
      display: block;
      width: 22px;
      height: 2px;
      background: var(--text-primary);
      margin: 4px 0;
      transition: all 0.3s ease;
      border-radius: 1px;
    }
    
    /* Responsive */
    @media (max-width: 792px) {
      .app-icon-strip {
        display: none;
      }
    }
    
    @media (max-width: 768px) {
      h1 {
        font-size: 32px;
      }
      
      .hero {
        padding: 72px 0 20px;
      }
      
      .hero-tagline {
        font-size: 20px;
      }
      
      .hero-subtitle {
        font-size: 17px;
      }
      
      .hero-find-us {
        font-size: 15px;
      }
      
      .hero-games-scroll {
        margin-top: 8px;
      }
      
      .hero-games-container {
        padding: 0 16px;
      }
      
      .hero-game-card {
        padding: 10px 16px;
      }
      
      .hero-game-icon {
        width: 32px;
        height: 32px;
      }
      
              .hero-game-name {
          font-size: 15px;
        }
        
        .hero-games-wrapper::before,
        .hero-games-wrapper::after {
          width: 60px;
        }
        
        .hero-see-all {
          margin-top: 16px;
        }
        
        .hero-see-all a {
          font-size: 15px;
        }
      
      .nav-links {
        display: none;
      }
      
      .mobile-menu-btn {
        display: block;
      }
      
      .games-grid {
        grid-template-columns: 1fr;
        gap: 16px;
      }
      
      .featured-game {
        padding: 24px;
      }
      
      /* Reduce font sizes for game cards on mobile */
      .game-description {
        font-size: 14px;
      }
      
      .game-link {
        font-size: 13px;
        padding: 8px 12px;
      }
      
      .game-icon {
        width: 50px;
        height: 50px;
      }
      
      .game-info h3 {
        font-size: 18px;
      }
      
      .game-category {
        font-size: 13px;
      }
    }
    
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .fade-in {
      animation: fadeIn 0.6s ease-out forwards;
    }
    
    /* Featured Games Section */
    .featured-section {
      padding: 80px 0;
      background: var(--bg-secondary);
    }
    
    .featured-games-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 32px;
      margin-top: 48px;
    }
    
    .featured-game {
      background: white;
      border-radius: var(--border-radius-large);
      padding: 40px;
      box-shadow: var(--shadow-light);
      transition: all 0.3s ease;
      border: 1px solid var(--border-color);
    }
    
    .featured-game:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-medium);
      border-color: rgba(88, 86, 214, 0.2);
    }
    
    .featured-game-header {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 24px;
    }
    
    .featured-game-icon {
      width: 80px;
      height: 80px;
      border-radius: 18px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    .featured-content h3 {
      font-size: 28px;
      margin-bottom: 8px;
      font-weight: 700;
    }
    
    .featured-content p {
      font-size: 17px;
      margin-bottom: 24px;
      line-height: 1.6;
      color: var(--text-secondary);
    }
    
    /* Animation on scroll */
    .animate-on-scroll {
      opacity: 0;
      transform: translateY(30px);
      transition: all 0.6s ease-out;
    }
    
    .animate-on-scroll.visible {
      opacity: 1;
      transform: translateY(0);
    }
    
    @media (max-width: 768px) {
      .featured-games-grid {
        display: flex;
        overflow-x: auto;
        overflow-y: hidden;
        scroll-snap-type: x mandatory;
        -webkit-overflow-scrolling: touch;
        gap: 16px;
        padding: 0 20px;
        margin: 48px -20px 0;
      }
      
      .featured-games-grid::-webkit-scrollbar {
        height: 8px;
      }
      
      .featured-games-grid::-webkit-scrollbar-track {
        background: var(--bg-secondary);
        border-radius: 4px;
      }
      
      .featured-games-grid::-webkit-scrollbar-thumb {
        background: rgba(0, 0, 0, 0.2);
        border-radius: 4px;
      }
      
      .featured-game {
        flex: 0 0 300px;
        scroll-snap-align: start;
        grid-template-columns: 1fr;
        gap: 40px;
      }
      
      .featured-game:first-child {
        margin-left: 20px;
      }
      
      .featured-game:last-child {
        margin-right: 20px;
      }
    }
    
    /* Campaign Section */
    .campaign-section {
      background: linear-gradient(135deg, #f8f8fb 0%, #ffffff 100%);
      padding: 48px 0;
      border-bottom: 1px solid var(--border-color);
    }
    
    .campaign-content {
      max-width: 800px;
      margin: 0 auto;
      text-align: center;
      padding: 40px;
      background: white;
      border-radius: var(--border-radius);
      box-shadow: var(--shadow-light);
      border: 1px solid rgba(88, 86, 214, 0.1);
    }
    
    .campaign-emoji {
      font-size: 48px;
      margin-bottom: 20px;
    }
    
    .campaign-title {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 16px;
      color: var(--text-primary);
    }
    
    .campaign-title em {
      font-style: italic;
      color: var(--accent-purple);
    }
    
    .campaign-text {
      font-size: 17px;
      line-height: 1.6;
      color: var(--text-primary);
      margin-bottom: 16px;
    }
    
    .campaign-highlight {
      font-size: 20px;
      font-weight: 600;
      color: var(--accent-purple);
      margin: 24px 0;
    }
    
    .campaign-link {
      color: var(--primary-color);
      text-decoration: none;
      font-weight: 600;
      transition: color 0.2s ease;
    }
    
    .campaign-link:hover {
      color: var(--accent-purple);
      text-decoration: underline;
    }
    
    .campaign-download {
      font-size: 16px;
      color: var(--text-secondary);
      margin-top: 24px;
    }
    
    .campaign-hashtag {
      color: var(--accent-purple);
      font-weight: 600;
    }

    .campaign-terms {
      font-size: 14px;
      color: var(--text-secondary);
      margin-top: 20px;
    }
    
    /* Mobile overrides for campaign section */
    @media (max-width: 768px) {
      .campaign-content {
        padding: 24px;
      }
      
      .campaign-title {
        font-size: 22px;
      }
      
      .campaign-highlight {
        font-size: 18px;
      }
      
      .campaign-emoji {
        font-size: 32px;
      }
    }
  </style>
  
  <!-- Custom style to override specific elements -->
  <style>
    /* Hide old header elements */
    header:not(.nav-header) {
      display: none !important;
    }
    
    .nav-container {
      display: none !important;
    }
    
    /* Mobile menu styles */
    @media (max-width: 768px) {
      .nav-links {
        position: fixed;
        top: 52px; /* Account for nav height */
        left: 0;
        right: 0;
        background: rgba(255, 255, 255, 0.98);
        backdrop-filter: blur(20px);
        flex-direction: column;
        padding: 20px;
        transform: translateY(-100%);
        opacity: 0;
        transition: all 0.3s ease;
        box-shadow: var(--shadow-medium);
      }
      
      .nav-links.active {
        display: flex;
        transform: translateY(0);
        opacity: 1;
      }
      
      .nav-link {
        padding: 16px 0;
        font-size: 17px;
        border-bottom: 1px solid var(--border-color);
      }
      
      .nav-link:last-child {
        border-bottom: none;
      }
      
      /* Hamburger animation */
      .mobile-menu-btn.active span:nth-child(1) {
        transform: rotate(45deg) translate(5px, 5px);
      }
      
      .mobile-menu-btn.active span:nth-child(2) {
        opacity: 0;
      }
      
      .mobile-menu-btn.active span:nth-child(3) {
        transform: rotate(-45deg) translate(5px, -5px);
      }
    }
    
    footer {
      background: var(--bg-secondary);
      color: var(--text-primary);
      border-top: 1px solid var(--border-color);
    }
    
    .footer-links a {
      color: var(--text-secondary);
      transition: color 0.2s ease;
    }
    
    .footer-links a:hover {
      color: var(--primary-color);
    }
  </style>
</head>
<body>
  <script>
    // Simple password protection for dev page
    (function() {
      const DEV_PASSWORD = 'stapledev2024'; // Change this to your preferred password
      const STORAGE_KEY = 'staplegames_dev_auth';
      const SESSION_DURATION = 24 * 60 * 60 * 1000; // 24 hours
      
      // Check if user has valid session
      const checkAuth = () => {
        const stored = localStorage.getItem(STORAGE_KEY);
        if (stored) {
          const { timestamp } = JSON.parse(stored);
          if (Date.now() - timestamp < SESSION_DURATION) {
            return true;
          }
        }
        return false;
      };
      
      // If not authenticated, prompt for password
      if (!checkAuth()) {
        const password = prompt('This is a development page. Please enter the password to continue:');
        
        if (password !== DEV_PASSWORD) {
          alert('Incorrect password. Access denied.');
          // Redirect to main site
          window.location.href = '/';
        } else {
          // Store authentication
          localStorage.setItem(STORAGE_KEY, JSON.stringify({
            timestamp: Date.now()
          }));
        }
      }
    })();
  </script>
  

  
  <!-- New Header Navigation -->
  <header class="nav-header">
    <div class="container">
      <nav class="nav-content">
        <a href="#" class="nav-logo" id="scrollLogo">
          <img src="https://cdn.bdz5.com/staplegames/matchcollector_icon.png" alt="Staple Games">
          <span>Staple Games</span>
        </a>
        <ul class="nav-links">
          <li><a href="#" class="nav-link">Home</a></li>
          <li><a href="#games" class="nav-link">Games</a></li>
          <li><a href="contact.html" class="nav-link">Support</a></li>
        </ul>
        <button class="mobile-menu-btn">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </nav>
    </div>
  </header>
  
  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-container">
      <div class="hero-content">
        <!-- Main Logo -->
        <img src="https://cdn.bdz5.com/staplegames/matchcollector_icon.png" alt="Staple Games" class="hero-logo">
        
        <!-- App Name -->
        <h1>Staple Games</h1>
        
        <!-- Tagline -->
        <p class="hero-tagline">Simple. Clean. Fun.</p>
        
        <!-- Subtitle -->
        <p class="hero-subtitle">Rediscover the classics you love — and fall for our originals</p>
      </div>
    </div>
    
    <!-- Horizontal Scrolling Game Cards -->
    <div class="hero-games-wrapper">
      <div class="hero-games-scroll" id="heroGamesScroll">
        <!-- Cards will be populated dynamically -->
      </div>
    </div>
    
    <!-- Find us text with inline store links -->
    <p class="hero-find-us">
      Find us in the 
      <a href="https://apps.apple.com/us/developer/staple-games/id1454538415" class="inline-store-link">App Store</a> 
      and 
      <a href="https://play.google.com/store/apps/developer?id=Staple+Games" class="inline-store-link">Google Play</a>
    </p>
    
    <!-- See all games arrow -->
    <div class="hero-see-all">
      <a href="#games">
        see all our games
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </a>
    </div>
  </section>
  
  <!-- Campaign Section -->
  <section class="campaign-section">
    <div class="container">
      <div class="campaign-content">
        <div class="campaign-emoji">🚗 🎮 💛</div>
        <h2 class="campaign-title">Join Us on the Road to $4 Million with Ryan Trahan</h2>
        <p class="campaign-text">
          We're proud to support Ryan and Haley on their <a href="https://www.youtube.com/@ryan" class="campaign-link" target="_blank"><em>50 States in 50 Days</em></a> road trip to raise funds for <strong>St. Jude Children's Research Hospital</strong> — a cause we deeply care about.
        </p>
        <p class="campaign-highlight">
          This week, we're donating $1 for every game download.
        </p>
        <p class="campaign-text">
          Play a game. Fuel a mission. Help families in need.
        </p>
        <p class="campaign-text">
          Want to donate directly? Visit:<br>
          👉 <a href="https://50-states-in-50-days.experience.stjude.org/" class="campaign-link" target="_blank">stjude.org/50states</a>
        </p>
        <p class="campaign-download">
          <strong>Download to donate on <a href="https://apps.apple.com/us/developer/staple-games/id1454538415" class="campaign-link" target="_blank">iOS</a> and <a href="https://play.google.com/store/apps/developer?id=Staple+Games" class="campaign-link" target="_blank">Android</a></strong><br>
          <span class="campaign-hashtag">#GamingForGood</span>
        </p>
        <p class="campaign-terms">
          See full terms & details here
        </p>
      </div>
    </div>
  </section>
  
  <!-- Featured Games Section -->
  <section class="featured-section">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Featured Games</h2>
        <p class="section-subtitle">Our most loved games with millions of happy players</p>
      </div>
      
      <div class="featured-games-grid" id="featuredGamesContainer">
        <!-- Featured games will be populated dynamically from the main games list -->
      </div>
    </div>
  </section>
  
  <main class="container">
    
    <!-- Games Section -->
    <section class="games-section" id="games">
      <div class="section-header">
        <h2 class="section-title">Our Games</h2>
        <p class="section-subtitle">Classic favorites and modern originals, crafted with care</p>
      </div>
            <div class="games-grid" id="allGamesGrid">
        <!-- Games will be populated dynamically from gameData -->
      </div>
    </section>
  </main>
  
  <section class="cta" style="display: none;">
      <h3>Discover More Games</h3>
      <p>Check out our full collection on Google Play and the App Store</p>
      <div class="app-links" style="max-width: 400px; margin: 1rem auto;">
        <a href="https://play.google.com/store/apps/developer?id=Staple+Games" class="app-link" style="margin-top: 1rem;">Google Play</a>
        <a href="https://apps.apple.com/us/developer/staple-games/id1454538415" class="app-link ios-link" style="margin-top: 1rem;">App Store</a>
      </div>
    </section>
  </main>
  
  <footer style="padding: 40px 0; text-align: center;">
    <div class="container">
      <div style="margin-bottom: 24px;">
        <img src="https://cdn.bdz5.com/staplegames/matchcollector_icon.png" alt="Staple Games" style="width: 48px; height: 48px; border-radius: 12px; margin-bottom: 16px;">
        <h3 style="font-size: 20px; margin-bottom: 8px;">Staple Games</h3>
        <p style="color: var(--text-secondary); margin-bottom: 0;">Simple. Clean. Fun.</p>
      </div>
      <div class="footer-links" style="margin-bottom: 24px;">
        <a href="privacy.html">Privacy</a>
        <a href="terms.html">Terms</a>
        <a href="contact.html">Support</a>
      </div>
      <p style="color: var(--text-secondary); font-size: 14px;">© 2024 Staple Games. All rights reserved.</p>
    </div>
  </footer>

  <script>
    // Modern site functionality
    document.addEventListener('DOMContentLoaded', function() {
      // Centralized game data structure
      const gameData = {
        games: {
          matchcollector: {
            id: "matchcollector",
            name: "Match Collector",
            category: "Puzzle",
            description: "A colorful and addictive match-3 puzzle game. Connect icons and clear the board.",
            icon: "https://cdn.bdz5.com/staplegames/matchcollector_icon.png",
            links: {
              android: "https://play.google.com/store/apps/details?id=com.staplegames.matchcollector",
              ios: "https://apps.apple.com/app/match-collector/id6462309005"
            }
          },
          tilecollector: {
            id: "tilecollector",
            name: "Tile Collector",
            category: "Puzzle",
            description: "Match and collect tiles in this addictive puzzle game with beautiful visuals.",
            icon: "https://cdn.bdz5.com/staplegames/tilecollector_icon.png",
            links: {
              android: "https://play.google.com/store/apps/details?id=com.staplegames.tilecollector",
              ios: "https://apps.apple.com/app/tile-collector/id6449299885"
            }
          },
          blockpuzzle: {
            id: "blockpuzzle",
            name: "Block Puzzle - Classic Style",
            category: "Puzzle",
            description: "Arrange blocks to complete lines and clear the board in this addictive puzzle game.",
            icon: "https://cdn.bdz5.com/staplegames/blocksClassicSG_icon.png",
            links: {
              android: "https://play.google.com/store/apps/details?id=com.staplegames.blocksClassicSGGP",
              ios: "https://apps.apple.com/app/block-puzzle-classic/id1572892132"
            }
          },
          dice: {
            id: "dice",
            name: "Dice Merge",
            category: "Puzzle",
            description: "The perfect puzzle combination of a block and merge game.",
            icon: "https://cdn.bdz5.com/staplegames/dice_icon.png",
            links: {
              android: "https://play.google.com/store/apps/details?id=com.staplegames.dice",
              ios: "https://apps.apple.com/app/dice/id1663958329"
            }
          },
          spades: {
            id: "spades",
            name: "Spades",
            category: "Card Games",
            description: "The classic trick-taking card game for fun and domination.",
            icon: "https://cdn.bdz5.com/staplegames/spades_icon.png",
            links: {
              android: "https://play.google.com/store/apps/details?id=com.staplegames.spades",
              ios: "https://apps.apple.com/app/spades/id6447909127"
            }
          },
          hearts: {
            id: "hearts",
            name: "Hearts",
            category: "Card Games",
            description: "Master the art of trick avoidance in this strategic card game with clever AI opponents.",
            icon: "https://cdn.bdz5.com/staplegames/hearts_icon.png",
            links: {
              android: "https://play.google.com/store/apps/details?id=com.staplegames.hearts",
              ios: "https://apps.apple.com/app/hearts/id6744656403"
            }
          },
          solitaire: {
            id: "solitaire",
            name: "Solitaire",
            category: "Card Games",
            description: "The timeless classic, reimagined. Experience the world's most beloved card game with stunning graphics.",
            icon: "https://cdn.bdz5.com/staplegames/solitaire_icon.png",
            links: {
              android: "https://play.google.com/store/apps/details?id=com.staplegames.solitaireGP",
              ios: "https://apps.apple.com/app/solitaire/id1454538656"
            }
          },
          sudoku: {
            id: "sudoku",
            name: "Sudoku",
            category: "Puzzle",
            description: "Classic number puzzle game with multiple difficulty levels for all skill levels.",
            icon: "https://cdn.bdz5.com/staplegames/sudokuSG_icon.png",
            links: {
              android: "https://play.google.com/store/apps/details?id=com.staplegames.sudokuClassicGP",
              ios: "https://apps.apple.com/app/sudoku/id1561193287"
            }
          },
          blockssudoku: {
            id: "blockssudoku",
            name: "Block Puzzle - Sudoku Style",
            category: "Puzzle",
            description: "Arrange blocks to complete lines and clear the board in this addictive puzzle game.",
            icon: "https://cdn.bdz5.com/staplegames/blocksSudokuSG_icon.png",
            links: {
              android: "https://play.google.com/store/apps/details?id=com.staplegames.blocksSudokuSGGP",
              ios: "https://apps.apple.com/app/blocks-sudoku-sg/id1566174072"
            }
          },
          dyno: {
            id: "dyno",
            name: "Dyno",
            category: "Adventure",
            description: "A fun and challenging game where you need to climb to the peak of the mountain... underwater... in space.",
            icon: "https://cdn.bdz5.com/staplegames/dyno_icon.png",
            links: {
              ios: "https://apps.apple.com/app/id6636553804"
            }
          },
          spider: {
            id: "spider",
            name: "Spider Solitaire",
            category: "Card Games",
            description: "Play the classic solitaire game with a unique twist of spider solitaire.",
            icon: "https://cdn.bdz5.com/staplegames/spiderSolitaire_icon.png",
            links: {
              android: "https://play.google.com/store/apps/details?id=com.staplegames.spiderSolitaireGP",
              ios: "https://apps.apple.com/app/spider-solitaire/id1507224245"
            }
          },
          freecell: {
            id: "freecell",
            name: "FreeCell Solitaire",
            category: "Card Games",
            description: "Play the classic solitaire game with a unique twist of freecell solitaire.",
            icon: "https://cdn.bdz5.com/staplegames/freecellSolitaire_icon.png",
            links: {
              android: "https://play.google.com/store/apps/details?id=com.staplegames.freecellSolitaireGP",
              ios: "https://apps.apple.com/app/freecell-solitaire/id1506267119"
            }
          },
          sagadoku: {
            id: "sagadoku",
            name: "Sagadoku",
            category: "Puzzle",
            description: "A fresh take on Sudoku with unique gameplay mechanics and beautiful visuals.",
            icon: "https://cdn.bdz5.com/staplegames/sagadoku_icon.png",
            links: {
              android: "https://play.google.com/store/apps/details?id=com.staplegames.sagadoku",
              ios: "https://apps.apple.com/app/sagadoku/id1612649783"
            }
          },
          blockmatch: {
            id: "blockmatch",
            name: "Block Match",
            category: "Puzzle",
            description: "Match colorful blocks in this engaging puzzle game. Perfect for quick play sessions.",
            icon: "https://cdn.bdz5.com/staplegames/blockmatch_icon.png",
            links: {
              android: "https://play.google.com/store/apps/details?id=com.staplegames.blockmatch",
              ios: "https://apps.apple.com/app/block-match/id6742160377"
            }
          },
          blockswood: {
            id: "blockswood",
            name: "Block Puzzle - Wood Style",
            category: "Puzzle",
            description: "A beautiful wooden-themed block puzzle game with relaxing gameplay.",
            icon: "https://cdn.bdz5.com/staplegames/blocksWood_icon.png",
            links: {
              android: "https://play.google.com/store/apps/details?id=com.staplegames.blocksWood",
              ios: "https://apps.apple.com/app/block-puzzle-wood/id1630975482"
            }
          },
          dominoes: {
            id: "dominoes",
            name: "Dominoes",
            category: "Board Games",
            description: "Play the classic tile-based game with multiple variations and game modes.",
            icon: "https://cdn.bdz5.com/staplegames/dominoes_icon.png",
            links: {
              android: "https://play.google.com/store/apps/details?id=com.staplegames.dominoes",
              ios: "https://apps.apple.com/app/dominoes/id6504120934"
            }
          },
          ludo: {
            id: "ludo",
            name: "Ludo",
            category: "Board Games",
            description: "The classic board game of strategy, luck, and competition for up to four players.",
            icon: "https://cdn.bdz5.com/staplegames/ludo_icon.png",
            links: {
              android: "https://play.google.com/store/apps/details?id=com.staplegames.ludo",
              ios: "https://apps.apple.com/app/ludo/id6446255045"
            }
          },
          mahjong: {
            id: "mahjong",
            name: "Mahjong Collector",
            category: "Board Games",
            description: "Match pairs of identical tiles in this classic Chinese puzzle game with beautiful designs.",
            icon: "https://cdn.bdz5.com/staplegames/mahjongcollector_icon.png",
            links: {
              android: "https://play.google.com/store/apps/details?id=com.staplegames.mahjongcollector",
              ios: "https://apps.apple.com/app/mahjong-collector/id6737984114"
            }
          },
          sortcollector: {
            id: "sortcollector",
            name: "Sort Collector",
            category: "Puzzle",
            description: "Sort and organize colorful items in this relaxing and satisfying puzzle game.",
            icon: "https://cdn.bdz5.com/staplegames/sortcollector_icon.png",
            links: {
              android: "https://play.google.com/store/apps/details?id=com.staplegames.sortcollector",
              ios: "https://apps.apple.com/app/sort-collector/id6476427887"
            }
          },
          wordhorizons: {
            id: "wordhorizons",
            name: "Word Horizons",
            category: "Word Games",
            description: "Explore your vocabulary in this innovative word puzzle game with beautiful landscapes.",
            icon: "https://cdn.bdz5.com/staplegames/wordhorizons_icon.png",
            links: {
              android: "https://play.google.com/store/apps/details?id=com.staplegames.wordhorizons",
              ios: "https://apps.apple.com/app/word-horizons/id6444349473"
            }
          },
          wordsearch: {
            id: "wordsearch",
            name: "Word Search",
            category: "Word Games",
            description: "Find hidden words in all directions in this classic word search puzzle with multiple themes.",
            icon: "https://cdn.bdz5.com/staplegames/wordsearch_icon.png",
            links: {
              android: "https://play.google.com/store/apps/details?id=com.staplegames.wordsearch",
              ios: "https://apps.apple.com/app/word-search/id1643013597"
            }
          },
          wordgems: {
            id: "wordgems",
            name: "Word Gems™",
            category: "Word Games",
            description: "Test your vocabulary skills in this engaging word puzzle game with beautiful gem visuals.",
            icon: "https://cdn.bdz5.com/staplegames/wordgems_icon.png",
            links: {
              android: "https://play.google.com/store/apps/details?id=com.staplegames.wordgems",
              ios: "https://apps.apple.com/app/word-gems/id1639588528"
            }
          },
          yatzy: {
            id: "yatzy",
            name: "Yatzy",
            category: "Dice Games",
            description: "Roll dice and score points in this classic dice game.",
            icon: "https://cdn.bdz5.com/staplegames/yatzy_icon.png",
            links: {
              android: "https://play.google.com/store/apps/details?id=com.staplegames.yatzy",
              ios: "https://apps.apple.com/app/yatzy/id6477965248"
            }
          },
          verticalpinball: {
            id: "verticalpinball",
            name: "Vertical Pinball",
            category: "Arcade",
            description: "Experience pinball like never before! Play classic pinball with a unique vertical twist.",
            icon: "https://cdn.bdz5.com/staplegames/verticalpinball_icon.png",
            links: {
              android: "https://play.google.com/store/apps/details?id=com.staplegames.verticalpinball",
              ios: "https://apps.apple.com/app/vertical-pinball/id6746164704"
            }
          },
          backgammon: {
            id: "backgammon",
            name: "Backgammon",
            category: "Board Games",
            description: "The classic board game with smooth controls and beautiful design for endless fun.",
            icon: "https://cdn.bdz5.com/staplegames/backgammon_icon.png",
            links: {
              android: "https://play.google.com/store/apps/details?id=com.staplegames.backgammon",
              ios: "https://apps.apple.com/app/backgammon/id6451217307"
            }
          }
        },
        sections: {
          // Hero icons configuration (1-3-5 pattern)
          heroIcons: [
            ["tilecollector"], // Column 1
            ["sudoku", "blockpuzzle", "spades"], // Column 2
            ["wordgems", "backgammon", "dice", "spider", "mahjong"] // Column 3
          ],
          // Featured games
          featured: ["matchcollector", "dice"],
          // All games order
          allGames: [
            "matchcollector", "tilecollector", "blockpuzzle", "dice", "spades",
            "blockssudoku", "dyno", "sudoku", "spider", "freecell", "sagadoku",
            "blockmatch", "blockswood", "dominoes", "ludo", "mahjong",
            "sortcollector", "wordhorizons", "wordsearch", "wordgems", "yatzy",
            "backgammon", "solitaire", "hearts"
          ]
        }
      };

      // Mobile menu toggle
      const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
      const navLinks = document.querySelector('.nav-links');
      
      // Scroll-based logo appearance
      const navLogo = document.getElementById('scrollLogo');
      const heroLogo = document.querySelector('.hero-logo');
      const navHeader = document.querySelector('.nav-header');
      
      // Check scroll position to show/hide nav logo
      function checkScroll() {
        if (heroLogo) {
          const heroLogoBottom = heroLogo.getBoundingClientRect().bottom;
          const shouldShowNavLogo = heroLogoBottom < 100;
          
          if (shouldShowNavLogo) {
            navLogo.classList.add('visible');
            navHeader.classList.add('scrolled');
          } else {
            navLogo.classList.remove('visible');
            navHeader.classList.remove('scrolled');
          }
        }
      }
      
      // Throttle scroll events
      let scrollTimeout;
      window.addEventListener('scroll', function() {
        if (scrollTimeout) {
          window.cancelAnimationFrame(scrollTimeout);
        }
        scrollTimeout = window.requestAnimationFrame(checkScroll);
      });
      
      // Initial check
      checkScroll();
      
      // Animation on scroll
      const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
      };
      
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
          }
        });
      }, observerOptions);
      
      // Observe all elements with animate-on-scroll class
      document.querySelectorAll('.animate-on-scroll').forEach(el => {
        observer.observe(el);
        // Check if element is already in view on page load
        const rect = el.getBoundingClientRect();
        if (rect.top < window.innerHeight && rect.bottom > 0) {
          el.classList.add('visible');
        }
      });
      

      
      mobileMenuBtn.addEventListener('click', function() {
        navLinks.classList.toggle('active');
        mobileMenuBtn.classList.toggle('active');
      });
      
      // Close menu when clicking a link
      const navLinksItems = document.querySelectorAll('.nav-link');
      navLinksItems.forEach(link => {
        link.addEventListener('click', function() {
          navLinks.classList.remove('active');
          mobileMenuBtn.classList.remove('active');
        });
      });
      
      // Function to setup smooth scroll for anchor links
      function setupSmoothScroll() {
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
          anchor.addEventListener('click', function(e) {
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
              e.preventDefault();
              // Calculate offset accounting for fixed header
              const headerHeight = document.querySelector('.nav-header').offsetHeight;
              const offset = headerHeight + 20; // 20px extra padding
              
              window.scrollTo({
                top: target.getBoundingClientRect().top + window.pageYOffset - offset,
                behavior: 'smooth'
              });
            }
          });
        });
      }
      
      // Call it initially for existing elements
      setupSmoothScroll();
      
      // Function to detect user's operating system
      function detectOS() {
        const userAgent = navigator.userAgent || navigator.vendor || window.opera;
        const platform = navigator.platform;
        
        // iOS detection
        if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
          return 'ios';
        }
        
        // iOS detection for iPad on iOS 13+
        if (platform === 'MacIntel' && navigator.maxTouchPoints > 1) {
          return 'ios';
        }
        
        // Android detection
        if (/android/i.test(userAgent)) {
          return 'android';
        }
        
        // Windows Phone detection
        if (/windows phone/i.test(userAgent)) {
          return 'windows_phone';
        }
        
        // Desktop detection
        if (/Mac|Win|Linux/i.test(platform)) {
          return 'desktop';
        }
        
        return 'unknown';
      }
      
      // Function to extract app ID from store URL
      function extractAppInfo(url) {
        console.log(`Extracting app info from URL: ${url}`);
        
        // Google Play pattern
        const googlePlayMatch = url.match(/play\.google\.com\/store\/apps\/details\?id=([^&]+)/);
        if (googlePlayMatch) {
          console.log('Matched Google Play URL');
          return {
            store: 'google',
            appId: googlePlayMatch[1],
            bundleId: googlePlayMatch[1]
          };
        }
        
        // App Store pattern with app name (with or without country code)
        const appStoreMatch = url.match(/apps\.apple\.com\/(?:[^\/]+\/)?app\/([^\/]+)\/id(\d+)/);
        if (appStoreMatch) {
          console.log('Matched App Store URL with name');
          return {
            store: 'apple',
            appName: appStoreMatch[1],
            appId: `id${appStoreMatch[2]}`,
            bundleId: appStoreMatch[2]
          };
        }
        
        // App Store pattern without app name (like Dyno)
        const appStoreShortMatch = url.match(/apps\.apple\.com\/(?:[^\/]+\/)?app\/id(\d+)/);
        if (appStoreShortMatch) {
          console.log('Matched App Store URL without name');
          return {
            store: 'apple',
            appName: null,
            appId: `id${appStoreShortMatch[1]}`,
            bundleId: appStoreShortMatch[1]
          };
        }
        
        // Developer page patterns
        if (url.includes('play.google.com/store/apps/developer')) {
          console.log('Matched Google Developer page');
          return { store: 'google', isDeveloperPage: true };
        }
        if (url.includes('apps.apple.com') && url.includes('developer')) {
          console.log('Matched Apple Developer page');
          return { store: 'apple', isDeveloperPage: true };
        }
        
        console.log('No match found for URL');
        return null;
      }
      
      // Configuration for AppsFlyer
      const APPSFLYER_CONFIG = {
        appId: {
          android: 'com.staplegames.matchcollector', // default
          ios: 'id6462309005' // default
        },
        attributionEndpoint: 'https://app.appsflyer.com/',
        impressionEndpoint: 'https://impression.appsflyer.com/'
      };
      
      // Function to send attribution data to AppsFlyer
      async function sendAttribution(appInfo, clickEvent) {
        console.log('Sending attribution data:', appInfo);
        
        // Generate a unique click ID
        const clickId = `web_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
        
        // Build attribution parameters as a string
        const appId = appInfo.appId || APPSFLYER_CONFIG.appId[appInfo.store === 'google' ? 'android' : 'ios'];
        
        // Build base URL with required parameters
        let attributionUrl = `${APPSFLYER_CONFIG.attributionEndpoint}` +
          `${encodeURIComponent(appId)}?` +
          `c=${encodeURIComponent('website2_organic')}` +
          `&pid=${encodeURIComponent('sg_web')}` +
          `&click_id=${encodeURIComponent(clickId)}` +
          `&redirect=false` +
          `&af_siteid=${encodeURIComponent('staplegames-website')}`;
        
        // Add optional parameters
        if (appInfo.appName) {
          attributionUrl += `&af_ad=${encodeURIComponent(appInfo.appName)}`;
        }
        
        // LOG THE FULL ATTRIBUTION URL
        console.log('=== APPSFLYER ATTRIBUTION URL ===');
        console.log('Full URL:', attributionUrl);
        console.log('Parsed components:', {
          endpoint: APPSFLYER_CONFIG.attributionEndpoint,
          appId: appId,
          campaign: 'website2_organic',
          clickId: clickId,
          appName: appInfo.appName || 'N/A',
          store: appInfo.store
        });
        console.log('================================');
        
        try {
          // Send attribution request using fetch (non-blocking)
          const response = await fetch(attributionUrl, {
            method: 'GET',
            mode: 'no-cors' // Avoid CORS issues
          });
          console.log('Attribution request sent successfully');
        } catch (error) {
          console.error('Error sending attribution data:', error);
          // Don't block the redirect even if attribution fails
        }
      }
      
      // Function to populate hero scrolling cards
      function populateHeroGames() {
        const heroGamesScroll = document.getElementById('heroGamesScroll');
        if (!heroGamesScroll) return;
        
        // Create container for cards
        const container = document.createElement('div');
        container.className = 'hero-games-container';
        
        // Function to create a card
        function createCard(game) {
          const card = document.createElement('a');
          card.className = 'hero-game-card';
          card.href = 'javascript:void(0)'; // Prevent navigation issues
          
          // Create icon
          const icon = document.createElement('img');
          icon.src = game.icon;
          icon.alt = game.name;
          icon.className = 'hero-game-icon';
          
          // Create name
          const name = document.createElement('span');
          name.className = 'hero-game-name';
          name.textContent = game.name;
          
          card.appendChild(icon);
          card.appendChild(name);
          
          // Add click handler with OS detection
          card.addEventListener('click', function(e) {
            e.preventDefault();
            
            const os = detectOS();
            let storeUrl;
            
            if (os === 'ios' && game.links.ios) {
              storeUrl = game.links.ios;
            } else if (os === 'android' && game.links.android) {
              storeUrl = game.links.android;
            } else {
              // Default to iOS if unknown
              storeUrl = game.links.ios || game.links.android;
            }
            
            if (storeUrl) {
              // Track with analytics before navigating
              if (typeof gtag !== 'undefined') {
                gtag('event', 'click', {
                  event_category: 'hero_card',
                  event_label: `${game.name} - ${os === 'ios' ? 'App Store' : 'Google Play'}`,
                  transport_type: 'beacon',
                  value: 1
                });
              }
              
              // Send AppsFlyer attribution
              const appInfo = extractAppInfo(storeUrl);
              if (appInfo) {
                sendAttribution(appInfo, e).then(() => {
                  window.location.href = storeUrl;
                });
              } else {
                window.location.href = storeUrl;
              }
            }
          });
          
          return card;
        }
        
        // Get all games in order
        const allGames = gameData.sections.allGames.map(gameId => gameData.games[gameId]).filter(game => game);
        
        // Add games twice for seamless looping
        allGames.forEach(game => {
          container.appendChild(createCard(game));
        });
        allGames.forEach(game => {
          container.appendChild(createCard(game));
        });
        
        heroGamesScroll.appendChild(container);
      }
      
      // Function to populate featured games
      function populateFeaturedGames() {
        const featuredContainer = document.getElementById('featuredGamesContainer');
        if (!featuredContainer) return;
        
        gameData.sections.featured.forEach(gameId => {
          const game = gameData.games[gameId];
          if (game) {
            const featuredGame = document.createElement('div');
            featuredGame.className = 'featured-game animate-on-scroll';
            featuredGame.innerHTML = `
              <div class="featured-game-header">
                <img src="${game.icon}" alt="${game.name}" class="featured-game-icon">
                <div class="featured-content">
                  <h3>${game.name}</h3>
                </div>
              </div>
              <p>${game.description}</p>
              <div class="game-links">
                ${game.links.android ? `<a href="${game.links.android}" class="game-link">Google Play</a>` : ''}
                ${game.links.ios ? `<a href="${game.links.ios}" class="game-link">App Store</a>` : ''}
              </div>
            `;
            featuredContainer.appendChild(featuredGame);
          }
        });
        
        // Re-observe new elements for animation
        const newFeaturedGames = featuredContainer.querySelectorAll('.animate-on-scroll');
        newFeaturedGames.forEach(el => {
          observer.observe(el);
        });
      }
      
      // Function to populate all games
      function populateAllGames() {
        const allGamesGrid = document.getElementById('allGamesGrid');
        if (!allGamesGrid) return;
        
        gameData.sections.allGames.forEach((gameId, index) => {
          const game = gameData.games[gameId];
          if (game) {
            const gameCard = document.createElement('div');
            gameCard.className = 'game-card animate-on-scroll';
            gameCard.id = gameId;
            gameCard.style.transitionDelay = `${Math.min(index * 0.02, 0.3)}s`;
            
            gameCard.innerHTML = `
              <div class="game-card-content">
                <div class="game-header">
                  <img src="${game.icon}" alt="${game.name}" class="game-icon">
                  <div class="game-info">
                    <h3>${game.name}</h3>
                    <p class="game-category">${game.category}</p>
                  </div>
                </div>
                <p class="game-description">${game.description}</p>
                <div class="game-links">
                  ${game.links.android ? `<a href="${game.links.android}" class="game-link">Google Play</a>` : ''}
                  ${game.links.ios ? `<a href="${game.links.ios}" class="game-link">App Store</a>` : ''}
                </div>
              </div>
            `;
            
            allGamesGrid.appendChild(gameCard);
          }
        });
        
        // Re-observe new elements for animation
        const newGameCards = allGamesGrid.querySelectorAll('.animate-on-scroll');
        newGameCards.forEach(el => {
          observer.observe(el);
          // Check if already in view and trigger animation
          const rect = el.getBoundingClientRect();
          if (rect.top < window.innerHeight && rect.bottom > 0) {
            setTimeout(() => el.classList.add('visible'), 20);
          }
        });
      }
      
      // Initialize all sections
      populateHeroGames();
      populateFeaturedGames();
      populateAllGames();
      
      // Re-setup smooth scroll for dynamically created elements
      setupSmoothScroll();
      
      // Add tracking for inline store links
      const inlineStoreLinks = document.querySelectorAll('.inline-store-link');
      inlineStoreLinks.forEach(link => {
        link.addEventListener('click', async function(e) {
          const url = this.href;
          const storeName = this.textContent.trim();
          
          // Send Google Analytics event
          if (typeof gtag !== 'undefined') {
            gtag('event', 'click', {
              event_category: 'hero_inline',
              event_label: `Developer Page - ${storeName}`,
              transport_type: 'beacon',
              value: 1
            });
          }
          
          // Extract app info and send attribution
          const appInfo = extractAppInfo(url);
          if (appInfo) {
            e.preventDefault();
            
            // For developer pages
            const developerInfo = {
              store: appInfo.store,
              bundleId: 'developer-page',
              isDeveloperPage: true,
              appName: `Staple Games - ${storeName}`
            };
            
            await sendAttribution(developerInfo, e);
            
            setTimeout(() => {
              window.location.href = url;
            }, 100);
          }
        });
      });
      
      // Initialize analytics tracking after all content is loaded
      setTimeout(initializeAnalyticsTracking, 300);
      
      console.log("Staple Games website loaded");
      
      // AppsFlyer Attribution Tracking
      function initializeAnalyticsTracking() {
        console.log("Initializing AppsFlyer attribution tracking");
      

      
      // Function to send impression event when page loads
      async function sendImpressionEvent() {
        console.log('Sending AppsFlyer impression event');
        
        // Detect user's OS
        const detectedOS = detectOS();
        console.log('User Agent:', navigator.userAgent);
        console.log('Platform:', navigator.platform);
        console.log('Detected OS:', detectedOS);
        
        // Determine which app ID to use based on OS
        let appIdToUse;
        let platformName;
        
        if (detectedOS === 'ios') {
          appIdToUse = APPSFLYER_CONFIG.appId.ios;
          platformName = 'iOS';
        } else if (detectedOS === 'android') {
          appIdToUse = APPSFLYER_CONFIG.appId.android;
          platformName = 'Android';
        } else {
          // Default to Android for desktop/unknown
          appIdToUse = APPSFLYER_CONFIG.appId.android;
          platformName = `Other (${detectedOS})`;
        }
        
        console.log(`Using ${platformName} app ID: ${appIdToUse}`);
        
        // Generate a unique impression ID
        const impressionId = `web_imp_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
        
        // Build impression URL
        let impressionUrl = `${APPSFLYER_CONFIG.impressionEndpoint}` +
          `${encodeURIComponent(appIdToUse)}?` +
          `c=${encodeURIComponent('website2_organic')}` +
          `&pid=${encodeURIComponent('sg_web')}` +
          `&impression_id=${encodeURIComponent(impressionId)}` +
          `&af_siteid=${encodeURIComponent('staplegames-website')}` +
          `&af_sub1=${encodeURIComponent(detectedOS)}`;
        
        // LOG THE FULL IMPRESSION URL
        console.log('=== APPSFLYER IMPRESSION URL ===');
        console.log('Full URL:', impressionUrl);
        console.log('Parsed components:', {
          endpoint: APPSFLYER_CONFIG.impressionEndpoint,
          appId: appIdToUse,
          campaign: 'website2_organic',
          pid: 'sg_web',
          impressionId: impressionId,
          platform: detectedOS,
          platformName: platformName
        });
        console.log('================================');
        
        try {
          // Send impression request using fetch (non-blocking)
          const response = await fetch(impressionUrl, {
            method: 'GET',
            mode: 'no-cors' // Avoid CORS issues
          });
          console.log(`Impression event sent successfully for ${platformName}`);
        } catch (error) {
          console.error('Error sending impression event:', error);
          // Don't let impression tracking errors affect page functionality
        }
      }
      
      // Send impression event when page loads
      sendImpressionEvent();
      
      // Add click handlers to all app store links (updated for new design)
      // Use a slight delay to ensure all dynamic content is loaded
      setTimeout(() => {
        const appStoreLinks = document.querySelectorAll('.game-link, .store-button, .app-link');
        console.log(`Found ${appStoreLinks.length} app store links`);
      
      appStoreLinks.forEach((link, index) => {
        link.addEventListener('click', async function(e) {
          const url = this.href;
          const appInfo = extractAppInfo(url);
          
          // Get the app name from the closest game card or store button
          let appName = 'Unknown App';
          let linkType = 'Store';
          
          if (this.classList.contains('store-button')) {
            appName = 'Developer Page';
            linkType = this.textContent.trim();
          } else {
            // Try to find the game name from different card structures
            const gameCard = this.closest('.game-card');
            const featuredGame = this.closest('.featured-game');
            const appCard = this.closest('.app-card');
            
            if (gameCard) {
              const nameEl = gameCard.querySelector('.game-info h3');
              appName = nameEl ? nameEl.textContent : 'Unknown App';
            } else if (featuredGame) {
              const nameEl = featuredGame.querySelector('.featured-content h3');
              appName = nameEl ? nameEl.textContent : 'Unknown App';
            } else if (appCard) {
              const nameEl = appCard.querySelector('.app-name');
              appName = nameEl ? nameEl.textContent : 'Unknown App';
            }
            
            linkType = url.includes('apple.com') ? 'App Store' : 'Google Play';
          }
          
          // Send Google Analytics event for outbound link
          if (typeof gtag !== 'undefined') {
            gtag('event', 'click', {
              event_category: 'outbound',
              event_label: `${appName} - ${linkType}`,
              transport_type: 'beacon',
              value: 1
            });
            console.log(`GA event sent: ${appName} - ${linkType}`);
          }
          
          if (appInfo && !appInfo.isDeveloperPage) {
            console.log(`App store link clicked: ${url}`);
            
            // Prevent default navigation temporarily
            e.preventDefault();
            
            // Send attribution data in background
            await sendAttribution(appInfo, e);
            
            // Small delay to ensure request is sent
            setTimeout(() => {
              console.log(`Redirecting to: ${url}`);
              window.location.href = url;
            }, 100);
          } else if (appInfo && appInfo.isDeveloperPage) {
            console.log(`Developer page link clicked: ${url}`);
            // For developer pages, just track the click without detailed app info
            const developerInfo = {
              store: appInfo.store,
              bundleId: 'developer-page',
              isDeveloperPage: true
            };
            
            e.preventDefault();
            await sendAttribution(developerInfo, e);
            
            setTimeout(() => {
              window.location.href = url;
            }, 100);
          }
          // If no app info extracted, let the link work normally
        });
      });
      
              console.log('AppsFlyer attribution tracking initialized');
        
        // Add tracking for CTA section links (developer pages)
        const ctaLinks = document.querySelectorAll('.cta .app-link');
        ctaLinks.forEach(link => {
          link.addEventListener('click', function(e) {
            const linkText = this.textContent.trim();
            
            // Send Google Analytics event for CTA links
            if (typeof gtag !== 'undefined') {
              gtag('event', 'click', {
                event_category: 'cta',
                event_label: `Developer Page - ${linkText}`,
                transport_type: 'beacon',
                value: 1
              });
              console.log(`GA CTA event sent: Developer Page - ${linkText}`);
            }
          });
        });
        
        }, 50); // End of setTimeout for click handlers
      } // End of initializeAnalyticsTracking function
    }); // End of DOMContentLoaded

  </script>
</body>
</html> 